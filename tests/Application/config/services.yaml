# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    locale: en_US
    webgriffe_sylius_akeneo.api_client.base_url: http://demo.akeneo.com/
    webgriffe_sylius_akeneo.api_client.username: admin
    webgriffe_sylius_akeneo.api_client.password: admin
    webgriffe_sylius_akeneo.api_client.client_id: 1_demo_client_id
    webgriffe_sylius_akeneo.api_client.secret: demo_secret

services:
    webgriffe_sylius_akeneo.value_handler.name_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\TranslatablePropertyValueHandler'
        arguments:
            - '@property_accessor'
            - '@sylius.factory.product_translation'
            - '@sylius.factory.product_variant_translation'
            - '@sylius.translation_locale_provider.admin'
            - 'name'
            - 'name'

    webgriffe_sylius_akeneo.value_handler.slug_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ImmutableSlugValueHandler'
        arguments:
            - '@sonata.core.slugify.cocur'
            - '@sylius.factory.product_translation'
            - '@sylius.translation_locale_provider.admin'
            - '@sylius.repository.product_translation'
            - 'name'

    webgriffe_sylius_akeneo.value_handler.picture_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ImageValueHandler'
        arguments:
            - '@sylius.factory.product_image'
            - '@webgriffe_sylius_akeneo.api_client'
            - 'picture'
            - 'picture'

    webgriffe_sylius_akeneo.value_handler.image_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ImageValueHandler'
        arguments:
            - '@sylius.factory.product_image'
            - '@webgriffe_sylius_akeneo.api_client'
            - 'image'
            - 'image'

    webgriffe_sylius_akeneo.value_handler.variation_image_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ImageValueHandler'
        arguments:
            - '@sylius.factory.product_image'
            - '@webgriffe_sylius_akeneo.api_client'
            - 'variation_image'
            - 'variation_image'

    webgriffe_sylius_akeneo.value_handler.product_option_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ProductOptionValueHandler'
        arguments:
            - '@webgriffe_sylius_akeneo.api_client'
            - '@sylius.repository.product_option'
            - '@sylius.factory.product_option_value'
            - '@sylius.factory.product_option_value_translation'
            - '@sylius.repository.product_option_value'

    webgriffe_sylius_akeneo.value_handler.channel_pricing_value_handler:
        class: 'Webgriffe\SyliusAkeneoPlugin\ValueHandler\ChannelPricingValueHandler'
        arguments:
            - '@sylius.factory.channel_pricing'
            - '@sylius.repository.channel'
            - '@sylius.repository.currency'
            - 'price'

    webgriffe_sylius_akeneo.product.value_handlers_resolver:
        class: 'Webgriffe\SyliusAkeneoPlugin\PriorityValueHandlersResolver'
        calls:
            - method: add
              arguments:
                  - '@webgriffe_sylius_akeneo.value_handler.name_value_handler'
            - method: add
              arguments:
                  - '@webgriffe_sylius_akeneo.value_handler.slug_value_handler'
            - method: add
              arguments:
                  - '@webgriffe_sylius_akeneo.value_handler.picture_value_handler'
            - method: add
              arguments:
                  - '@webgriffe_sylius_akeneo.value_handler.product_option_value_handler'
            - method: add
              arguments:
                  - '@webgriffe_sylius_akeneo.value_handler.channel_pricing_value_handler'
